from pyModule.ME_class import ME
from nltk.classify import accuracy
from random import shuffle
import pickle
trigger_model_featureset = [({"ticket":1.5563025,"a":1.20412,"book":1.908485,"to":0.316725,"like":0.47712126,"would":0.47712126}, "book-train"),({"taxi":0.7781513,"a":0.90309,"me":0.47712126,"send":0.7781513,"you":0.47712126,"can":0.17609125}, "order-taxi"),({"times":0.7781513,"train":1.4313638,"the":3.8907564,"know":1.5563025,"to":0.23754373}, "get-train-info"),({"food":3.112605,"some":2.3344538}, "order-food"),({"account":3.112605,"online":2.3344538,"an":3.112605,"create":1.5563025,"to":0.1583625}, "signup-online-account"),({"please":0.47712126,"room":2.3344538,"a":0.90309}, "book-room"),({"ticket":1.5563025,"a":1.20412,"book":1.908485,"to":0.316725}, "book-train"),({"shedules":1.5563025,"train":1.4313638,"the":3.8907564,"get":0.7781513,"to":0.23754373}, "get-train-info"),({"food":3.112605,"buy":1.5563025,"to":0.1583625,"like":0.47712126,"would":0.47712126}, "order-food"),({"online":2.3344538,"account":3.112605,"an":3.112605,"for":0.7781513,"signup":0.7781513,"can":0.17609125}, "signup-online-account"),({"train":0.9542425,"a":1.20412,"book":1.908485,"to":0.316725,"me":0.47712126,"help":0.7781513,"please":0.47712126,"you":0.47712126,"can":0.17609125}, "book-train"),({"cab":1.5563025,"a":0.90309,"need":0.30103}, "order-taxi"),({"kandy":0.7781513,"from":0.7781513,"nleaving":0.7781513,"train":1.4313638,"the":3.8907564,"of":0.7781513,"shedules":1.5563025,"the":3.8907564,"know":1.5563025,"to":0.23754373}, "get-train-info"),({"food":3.112605,"some":2.3344538,"buy":1.5563025}, "order-food"),({"account":3.112605,"online":2.3344538,"an":3.112605,"create":1.5563025,"to":0.1583625}, "signup-online-account"),({"room":2.3344538,"few":0.7781513,"a":0.90309,"book":0.9542425,"to":0.1583625}, "book-room"),({"train":0.9542425,"a":1.20412,"book":1.908485,"to":0.316725,"need":0.30103}, "book-train"),({"cab":1.5563025,"a":0.90309}, "order-taxi"),({"time":0.7781513,"departing":0.7781513,"trains":0.7781513,"the":3.8907564,"about":0.7781513,"find":0.7781513,"can":0.17609125}, "get-train-info"),({"food":3.112605,"some":2.3344538,"order":0.7781513,"to":0.1583625,"looking":0.7781513,"am":0.7781513}, "order-food"),({"account":3.112605,"onilne":0.7781513,"an":3.112605,"open":0.7781513}, "signup-online-account"),({"room":2.3344538,"a":0.90309,"book":0.9542425,"to":0.1583625,"need":0.30103}, "book-room")]
trigger_model_feature_mapping_temp = {}
trigger_model_feature_mapping_temp["book-train","ticket"] = 1.5563025
trigger_model_feature_mapping_temp["book-train","a"] = 1.20412
trigger_model_feature_mapping_temp["book-train","book"] = 1.908485
trigger_model_feature_mapping_temp["book-train","to"] = 0.316725
trigger_model_feature_mapping_temp["book-train","like"] = 0.47712126
trigger_model_feature_mapping_temp["book-train","would"] = 0.47712126
trigger_model_feature_mapping_temp["order-taxi","taxi"] = 0.7781513
trigger_model_feature_mapping_temp["order-taxi","a"] = 0.90309
trigger_model_feature_mapping_temp["order-taxi","me"] = 0.47712126
trigger_model_feature_mapping_temp["order-taxi","send"] = 0.7781513
trigger_model_feature_mapping_temp["order-taxi","you"] = 0.47712126
trigger_model_feature_mapping_temp["order-taxi","can"] = 0.17609125
trigger_model_feature_mapping_temp["get-train-info","times"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","train"] = 1.4313638
trigger_model_feature_mapping_temp["get-train-info","the"] = 3.8907564
trigger_model_feature_mapping_temp["get-train-info","know"] = 1.5563025
trigger_model_feature_mapping_temp["get-train-info","to"] = 0.23754373
trigger_model_feature_mapping_temp["order-food","food"] = 3.112605
trigger_model_feature_mapping_temp["order-food","some"] = 2.3344538
trigger_model_feature_mapping_temp["signup-online-account","account"] = 3.112605
trigger_model_feature_mapping_temp["signup-online-account","online"] = 2.3344538
trigger_model_feature_mapping_temp["signup-online-account","an"] = 3.112605
trigger_model_feature_mapping_temp["signup-online-account","create"] = 1.5563025
trigger_model_feature_mapping_temp["signup-online-account","to"] = 0.1583625
trigger_model_feature_mapping_temp["book-room","please"] = 0.47712126
trigger_model_feature_mapping_temp["book-room","room"] = 2.3344538
trigger_model_feature_mapping_temp["book-room","a"] = 0.90309
trigger_model_feature_mapping_temp["book-train","ticket"] = 1.5563025
trigger_model_feature_mapping_temp["book-train","a"] = 1.20412
trigger_model_feature_mapping_temp["book-train","book"] = 1.908485
trigger_model_feature_mapping_temp["book-train","to"] = 0.316725
trigger_model_feature_mapping_temp["get-train-info","shedules"] = 1.5563025
trigger_model_feature_mapping_temp["get-train-info","train"] = 1.4313638
trigger_model_feature_mapping_temp["get-train-info","the"] = 3.8907564
trigger_model_feature_mapping_temp["get-train-info","get"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","to"] = 0.23754373
trigger_model_feature_mapping_temp["order-food","food"] = 3.112605
trigger_model_feature_mapping_temp["order-food","buy"] = 1.5563025
trigger_model_feature_mapping_temp["order-food","to"] = 0.1583625
trigger_model_feature_mapping_temp["order-food","like"] = 0.47712126
trigger_model_feature_mapping_temp["order-food","would"] = 0.47712126
trigger_model_feature_mapping_temp["signup-online-account","online"] = 2.3344538
trigger_model_feature_mapping_temp["signup-online-account","account"] = 3.112605
trigger_model_feature_mapping_temp["signup-online-account","an"] = 3.112605
trigger_model_feature_mapping_temp["signup-online-account","for"] = 0.7781513
trigger_model_feature_mapping_temp["signup-online-account","signup"] = 0.7781513
trigger_model_feature_mapping_temp["signup-online-account","can"] = 0.17609125
trigger_model_feature_mapping_temp["book-train","train"] = 0.9542425
trigger_model_feature_mapping_temp["book-train","a"] = 1.20412
trigger_model_feature_mapping_temp["book-train","book"] = 1.908485
trigger_model_feature_mapping_temp["book-train","to"] = 0.316725
trigger_model_feature_mapping_temp["book-train","me"] = 0.47712126
trigger_model_feature_mapping_temp["book-train","help"] = 0.7781513
trigger_model_feature_mapping_temp["book-train","please"] = 0.47712126
trigger_model_feature_mapping_temp["book-train","you"] = 0.47712126
trigger_model_feature_mapping_temp["book-train","can"] = 0.17609125
trigger_model_feature_mapping_temp["order-taxi","cab"] = 1.5563025
trigger_model_feature_mapping_temp["order-taxi","a"] = 0.90309
trigger_model_feature_mapping_temp["order-taxi","need"] = 0.30103
trigger_model_feature_mapping_temp["get-train-info","kandy"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","from"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","nleaving"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","train"] = 1.4313638
trigger_model_feature_mapping_temp["get-train-info","the"] = 3.8907564
trigger_model_feature_mapping_temp["get-train-info","of"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","shedules"] = 1.5563025
trigger_model_feature_mapping_temp["get-train-info","the"] = 3.8907564
trigger_model_feature_mapping_temp["get-train-info","know"] = 1.5563025
trigger_model_feature_mapping_temp["get-train-info","to"] = 0.23754373
trigger_model_feature_mapping_temp["order-food","food"] = 3.112605
trigger_model_feature_mapping_temp["order-food","some"] = 2.3344538
trigger_model_feature_mapping_temp["order-food","buy"] = 1.5563025
trigger_model_feature_mapping_temp["signup-online-account","account"] = 3.112605
trigger_model_feature_mapping_temp["signup-online-account","online"] = 2.3344538
trigger_model_feature_mapping_temp["signup-online-account","an"] = 3.112605
trigger_model_feature_mapping_temp["signup-online-account","create"] = 1.5563025
trigger_model_feature_mapping_temp["signup-online-account","to"] = 0.1583625
trigger_model_feature_mapping_temp["book-room","room"] = 2.3344538
trigger_model_feature_mapping_temp["book-room","few"] = 0.7781513
trigger_model_feature_mapping_temp["book-room","a"] = 0.90309
trigger_model_feature_mapping_temp["book-room","book"] = 0.9542425
trigger_model_feature_mapping_temp["book-room","to"] = 0.1583625
trigger_model_feature_mapping_temp["book-train","train"] = 0.9542425
trigger_model_feature_mapping_temp["book-train","a"] = 1.20412
trigger_model_feature_mapping_temp["book-train","book"] = 1.908485
trigger_model_feature_mapping_temp["book-train","to"] = 0.316725
trigger_model_feature_mapping_temp["book-train","need"] = 0.30103
trigger_model_feature_mapping_temp["order-taxi","cab"] = 1.5563025
trigger_model_feature_mapping_temp["order-taxi","a"] = 0.90309
trigger_model_feature_mapping_temp["get-train-info","time"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","departing"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","trains"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","the"] = 3.8907564
trigger_model_feature_mapping_temp["get-train-info","about"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","find"] = 0.7781513
trigger_model_feature_mapping_temp["get-train-info","can"] = 0.17609125
trigger_model_feature_mapping_temp["order-food","food"] = 3.112605
trigger_model_feature_mapping_temp["order-food","some"] = 2.3344538
trigger_model_feature_mapping_temp["order-food","order"] = 0.7781513
trigger_model_feature_mapping_temp["order-food","to"] = 0.1583625
trigger_model_feature_mapping_temp["order-food","looking"] = 0.7781513
trigger_model_feature_mapping_temp["order-food","am"] = 0.7781513
trigger_model_feature_mapping_temp["signup-online-account","account"] = 3.112605
trigger_model_feature_mapping_temp["signup-online-account","onilne"] = 0.7781513
trigger_model_feature_mapping_temp["signup-online-account","an"] = 3.112605
trigger_model_feature_mapping_temp["signup-online-account","open"] = 0.7781513
trigger_model_feature_mapping_temp["book-room","room"] = 2.3344538
trigger_model_feature_mapping_temp["book-room","a"] = 0.90309
trigger_model_feature_mapping_temp["book-room","book"] = 0.9542425
trigger_model_feature_mapping_temp["book-room","to"] = 0.1583625
trigger_model_feature_mapping_temp["book-room","need"] = 0.30103
trigger_model_feature_mapping={}
for index,[label,f] in enumerate(trigger_model_feature_mapping_temp):
    trigger_model_feature_mapping[label,f] = (index,trigger_model_feature_mapping_temp[label,f])
shuffle(trigger_model_featureset)
train_set,test_set = trigger_model_featureset[10:],trigger_model_featureset[:10]
trigger_model_model = ME(trigger_model_feature_mapping)
trigger_model_model.train(trigger_model_featureset)
print(accuracy(trigger_model_model.classifier,test_set))
save_classifier = open("trigger_model.pickle","wb")
pickle.dump(trigger_model_model, save_classifier)
save_classifier.close()
